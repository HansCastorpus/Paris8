<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workshop P8</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
    <style>

body{
    display: flex;
align-items: center;
flex-direction: column;    border: 1px solid black;
}

h1,h2,h3 {
  font-family: "Spectral", serif;
  font-weight: 400;
  font-style: normal;
}

.svg{
    border: 1px solid black;
}

    </style>
</head>
<body>

    <h1>Workshop P8 : Exo 1 - Éléna Luzio/ Mina Leblanc/ Paul-Arthur Lemarquis</h1>
    <h2> Wikidata</h2>

    <iframe class="svg" style="width: 90vw; height: 540vh; border: 1px solid black;" src="https://query.wikidata.org/embed.html#%23defaultView%3ATimeline%0ASELECT%20%3Fastronaut%20%3FastronautLabel%20%3Fdate_of_birth%20%3Fcountry_of_citizenship%20%3Fcountry_of_citizenshipLabel%20WHERE%20%7B%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%20%20%0A%20%20%3Fastronaut%20wdt%3AP106%20wd%3AQ11631.%0A%20%20%3Fastronaut%20wdt%3AP569%20%3Fdate_of_birth.%20%0A%20%20%3Fastronaut%20wdt%3AP27%20%3Fcountry_of_citizenship.%20%0A%7D%0ALIMIT%20100" referrerpolicy="origin" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>
<br>
    <h1>RawGraphs Examples</h1>
    <h2>Astronaut Origin Circular Dendrogram</h2>
    <img class="svg" src="https://hanscastorpus.github.io/Paris8/Svg/dataviz.svg"></img>

    <h2>Astronaut Origin Circle Packing</h2>
    <img class="svg" src="https://hanscastorpus.github.io/Paris8/Svg/QuantityByCountry.svg"></img>

    <h2>Astronaut Origin Chords Diagram</h2>
    <img class="svg" src="https://hanscastorpus.github.io/Paris8/Svg/ChordsDiagram.svg"></img>
<br>
<br>
<br>
    
     <h1>Exo 2 - Éléna Luzio/ Mina Leblanc/ Paul-Arthur Lemarquis</h1>
    <h2>Quantité de mentions</h2>
<iframe width="900" height="800" frameborder="0" scrolling="no" src="//plotly.com/~HansCastorpus/1.embed"></iframe>
<br>
    
    <h2>StreamGraph</h2>
    <img src="bar graph.png"  />

<br>
    
    <h2>Ridgeline</h2>
    
    <!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>

    <script>

        // set the dimensions and margins of the graph
        var margin = {top: 60, right: 30, bottom: 20, left:110},
            width = 600 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;
        
        // append the svg object to the body of the page
        var svg = d3.select("#my_dataviz")
          .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform",
                  "translate(" + margin.left + "," + margin.top + ")");
        
        //read data
        d3.csv("OctanteJours_Segments.csv", function(data) {
        
          // Get the different categories and count them
          var categories = data.columns
          var n = categories.length

        
          // Add X axis
          var x = d3.scaleLinear()
            .domain([-10, 140])
            .range([ 0, width ]);
          svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x));
           
          // Create a Y scale for densities
          var y = d3.scaleLinear()
            .domain([0, 0.4])
            .range([ height, 0]);
        
          // Create the Y axis for names
          var yName = d3.scaleBand()
            .domain(categories)
            .range([0, height])
            .paddingInner(1)
          svg.append("g")
            .call(d3.axisLeft(yName));
        
          // Compute kernel density estimation for each column:
          var kde = kernelDensityEstimator(kernelEpanechnikov(7), x.ticks(40)) // increase this 40 for more accurate density.
          var allDensity = []
          for (i = 0; i < n; i++) {
              key = categories[i]
              density = kde( data.map(function(d){  return d[key]; }) )
              allDensity.push({key: key, density: density})
          }
        
          // Add areas
          svg.selectAll("areas")
            .data(allDensity)
            .enter()
            .append("path")
              .attr("transform", function(d){return("translate(0," + (yName(d.key)-height) +")" )})
              .datum(function(d){return(d.density)})
              .attr("fill", "#69b3a2")
              .attr("stroke", "#000")
              .attr("stroke-width", 1)
              .attr("d",  d3.line()
                  .curve(d3.curveBasis)
                  .x(function(d) { return x(d[0]); })
                  .y(function(d) { return y(d[1]); })
              )
        
        })
        
        // This is what I need to compute kernel density estimation
        function kernelDensityEstimator(kernel, X) {
          return function(V) {
            return X.map(function(x) {
              return [x, d3.mean(V, function(v) { return kernel(x - v); })];
            });
          };
        }
        function kernelEpanechnikov(k) {
          return function(v) {
            return Math.abs(v /= k) <= 1 ? 0.75 * (1 - v * v) / k : 0;
          };
        }
        
        </script>
    
</body>
</html>
